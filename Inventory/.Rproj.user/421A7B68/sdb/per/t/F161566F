{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Econ/Demog C175 Lab 1: World Population Growth\"\noutput: html_notebook\n---\n\n# Overview\n\nThis is the first lab of Economic Demography (Econ/Demog C175). Our \ngoals in this first lab are:\n\n1. To use the exponential model to learn\nabout world population history\n\n2. To get everyone started programming and doing their assignments\n   with R, RStudio, and bCourses.\n\n\n> This document is written in the \"R markdown\" format and should be\n> read and edited within RStudio. The notebook interface allows us \n> execute and display R-code within the Notebook. You can edit this \n> notebook directly and save it. We recommend you save it with a different \n> name (e.g., \"lab_1_world_xyz.Rmd\") to avoid overwriting your edits.\n\n# Writing and executing R commands\n\nIn the RStudio Notebook, we can write and execute R commands in the\nsame document that we are writing text in by creating a \"code chunk.\"\nTo open a code chunk, we type \"```{r}\"\" to start. To close the code\nchunk we type \"```\"\" to end. Here are some examples:\n\nTo print a string of text:\n```{r}\nprint(\"Hello, world\")\n```\nYou can hit the gren \"play\" icon to execute the chunk of code. Try modifying the chunk so it prints: \"Hello, Berkeley\". (Note the [1] just means that it is the first element of the displayed object. You can ignore this.)\n\nTo add 2 + 2:\n```{r}\n2+2\n```\n\nTo assign the value 4 to a variable named \"x\":\n```{r}\nx <- 4\nprint(x)\n```\n\nThe output of a chunk is only shown when you tell it to be. For example,\n```{r}\nx <- 3\nprint(x)\ny <- 4\n## note: we don't tell R to show us the value of \"y\"\nz <- 5\nprint(z)\n```\n\n# Using R to calculate exponential population growth rates\n\n\n```{r}\n## comments within code chunks begin with hashtags and are ignored by R\n\n## We start by inputting world population sizes by hand, assigning them to variables named \"N.1900\" and \"N.2000\" using the assignment operator: \"<-\"\nN.1900 <- 1650 # this is the estimated world populaiton in 1900 (in millions)\nN.2000 <- 6127 # same for 2000\n## we can display the value of the variable called N.1900 (hit the \"play\" button)\nprint(N.2000)\n```\n\n```{r}\n## We now calculate  growth rate from 1900 to 2000, using our formula for the slope of the logarithm of population.\nR.twentieth.century <- ( log(N.2000) - log(N.1900) ) / (2000 - 1900)\nR.twentieth.century\n```\nYou should get \"[1] 0.0131193\", or about 1.3 percent.\n\nWe can check this answer\n```{r}\nN.2000.check <- N.1900 * exp(100 * 0.0131193)\nN.2000.check\n```\nWhich is \"6127\", the correct value for the world population in 2000.\n\nNow let's calculate the exponential growth rate for the\nfifty years from 1950 to 1900. We need to alter the code below to\nget the right answer.\n\n```{r}\nN.1850 <- 1262 # these are millions\n## Note: We don't need to re-enter N.1900, since variables are saved across chunks.\n\n## Now modify the code below to give the right answer. (Hint: you need to rename the variables and change the dates.)\nR.1850.to.1900 <- ( log(N.2000) - log(N.1900) ) / (2000 - 1900)\nprint( R.1850.to.1900 )\n```\n\nYou should get $0.00536155$, about 0.5 percent. (Hint: If you're still getting 0.0131193, it means you haven't modified the code and have assigned the new variable R.1850.to.1900 with the answer for 1900 to 2000.)\n\n\n# The *complete* history of world population\n\nFirst we're going to read in data from a file that we've placed on the course lab website.\n```{r}\n## dat <- read.table(\"http://demog.berkeley.edu/~josh/world_population_data.txt\",\n##                  header =T)\n\ndat <- read.table(\"world_population_data.txt\",\n                  header =T)\ndat\n```\n\n\nNow that we've inspected this data set, we're going to extract the\ncontents into our two vectors year.vec and N.vec. (You don't need to\nunderstand this. We'll be learning about why this works in later\nlabs.)\n\n```{r}\nmillion <- 1000000\nN.vec <- dat$pop / 1000 ## converts millions to billions\nyear.vec <- dat$year\nnames(N.vec) <- year.vec\n```\n\nLet's look at both of these\n```{r}\nyear.vec\n```\n```{r}\nN.vec\n```\n\n## Our first plot\n\n```{r}\nplot(x = year.vec,\n     y = N.vec)\n```\nWow, looks like world population is exploding.\n\nLet's see what is happening in terms of proportional changes (by\ntaking logs)\n\n```{r}\nlog.N.vec <- log(N.vec)\nplot(x = year.vec, y = log.N.vec)\n```\nWow, it looks like even proportional rate of growth has increased.\n\n\nYou can now guess-timate the exponential population growth rate by\neyeing the \"slope\" of the log rate of\npopulation growth is equal to the calculated growth rate. For example,\nthe 8000 year period from -8000 to 0 saw an increase of about 4 in\nlog-population size. The slope is thus about 4/8000 = 0.0005. We can\ncheck this with our calculations below.\n\n\n## Calculating growth rates through history\n\nCalculate a vector of exponential growth rate.\n\nHere we will use the `diff()` function in R, which tells us the\ndifferences between elements in a vector.\n\nFor example,\n```\nx = c(4, 5, 7) ## this is a vector with three elements.\ndiff(x) # gives us the differences between elements\n```\n\nWe'll formulate this as the slope of the graph of log population sizes\n\n```{r}\nrise.vec <- diff(log.N.vec) # these are the \"rise\", the vertical distances between points\nrun.vec <- diff(year.vec) # these are \"run\", the horizontal distances between points\nslope.vec <- rise.vec / run.vec\nR.vec <- slope.vec\nR.vec\n```\n\n\nLet's make a bit more readable by giving in percentage points, and rounding\n```{r}\nR.vec.in.percent <- 100 * round(R.vec, 4)\nR.vec.in.percent\n```\nWe see that growth rates increased for nearly 10,000 years, but have\nrecently begun to decrease a bit.\n\n## Plotting the growth rates\n\nLet's try a plot:\n```{r}\nend.year.each.period.vec <- names(R.vec.in.percent)\nplot(x = end.year.each.period.vec,\n     y = R.vec.in.percent,\n     main = \"Exponential Growth Rates of World Population through the Ages\",\n     type = \"l\")\n```\n\n\nIt looks like population growth rates have begun to decline. To see a bit better, we can graph only the more recent years\n```{r}\nplot(x = end.year.each.period.vec,\n     y = R.vec.in.percent,\n     xlim = c(1900, 2020),              # limit the x-axis to 1900 to 2020\n     main = \"Exponential Growth Rates of World Population, since 1900\",\n     type = \"o\")\n```\n\n\n# Congratulations\n\nWe've finished all of the computing for the first lab!\n\n\n# Graded Questions\n\n\n1. [Multiple choice] Which of the following descriptions is best for the history of human population growth?\n\nA.  Thousands of years of near zero growth, followed by centuries of accelerating growth, with a recent slowing of growth.\n\nB.  Constant exponential growth at a rate slighly larger than zero.\n\nC.  Thousands of years of essentially zero growth, followed by a one time increase in growth rates.\n\nD.  Alternating lengthy periods of positive and negative growth.\n\n\n2. [A numerical answer] How large would the world population be today\nif growth rates had always been .0003 larger for the last 10,000\nyears?\n\nHint 1:  The rules of exponents tell us\n\nexp( (R + d) * t) = exp(R * t) * exp( d*t )\n\nHint 2: To calculate exp(10000 * .0003), you can use a calculator or\nany other tool. You don't have to use R.\n\nHint 3: You should get a population roughly 20 time as large as today.\n\nNote: Imagine we we increased the reproduction rate of each generation\nby 1%. So, for example, instead of each woman having on average 1\nsurviving daughter, imagine she had 1.01 surviving daughters. If\ngenerations were 30 years in length, then this would mean an increase\nin the growth rate by log(1.01/1.00)/30 = .0003. So, the calculation\nwe just did tells us what would have happened to the human population\nif fertility rates had always been just slightly, only 1 percent,\nhigher.\n\n\n3. [A numerical answer] How large would the world population in 2100 be if current exponential growth rates continue? Use 7.3 billion as the  population size in 2015 and assume $R = 0.01\". You can do this calculation however you choose (with R, by hand with a calculator, or any other way.)\n\n5. [A short answer.] Do you think this estimate of the world population in 2100 is likely to be too high or too low? Explain your reasoning in a sentence.\n\n6. [non-graded] About how many hours did it take you to complete this lab?\n\n\nCongratulations! You have completed Lab 1.\n\n\n\n\n",
    "created" : 1481063734134.000,
    "dirty" : true,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1462328578",
    "id" : "F161566F",
    "lastKnownWriteTime" : 1481062980,
    "last_content_update" : 1481064000923,
    "path" : "~/Inventory/lab_1_world_pop_smaller.Rmd",
    "project_path" : "lab_1_world_pop_smaller.Rmd",
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}